import { Component, Input } from '@angular/core';
import { CommonModule } from '@angular/common';
import { ChartConfiguration, ChartOptions } from 'chart.js';
import { NgChartsModule } from 'ng2-charts';
import { BarChartProps } from '../../interfaces/bar-chart-props';

@Component({
  selector: 'app-bar-chart',
  standalone: true,
  imports: [CommonModule, NgChartsModule],
  templateUrl: './bar-chart.component.html',
  styleUrl: './bar-chart.component.css'
})
export class BarChartComponent {
  @Input() props: BarChartProps = {
    chartTitle: '',
    barChartOptions: {},
    barChartData: { labels: [], datasets: [] }
  };
  public barChartOptions: ChartOptions<'bar'> = {
    responsive: true,
    scales: {
      x: {
        // ticks: {
        //   callback: function(_, idx): string {
        //     return this.getLabelForValue(idx).includes('T00:00') ? this.getLabelForValue(idx) : '';
        //   }
        // },
        title: {
          display: true,
          text: 'GMT+08'
        }
      },
      y: {
        beginAtZero: false,
        title: {
          display: true,
          text: '%'
        }
      }
    }
  };

  public barChartData: ChartConfiguration<'bar'>['data'] = {
    labels: [
      "2023-10-01T00:00",
      "2023-10-01T01:00",
      "2023-10-01T02:00",
      "2023-10-01T03:00",
      "2023-10-01T04:00",
      "2023-10-01T05:00",
      "2023-10-01T06:00",
      "2023-10-01T07:00",
      "2023-10-01T08:00",
      "2023-10-01T09:00",
      "2023-10-01T10:00",
      "2023-10-01T11:00",
      "2023-10-01T12:00",
      "2023-10-01T13:00",
      "2023-10-01T14:00",
      "2023-10-01T15:00",
      "2023-10-01T16:00",
      "2023-10-01T17:00",
      "2023-10-01T18:00",
      "2023-10-01T19:00",
      "2023-10-01T20:00",
      "2023-10-01T21:00",
      "2023-10-01T22:00",
      "2023-10-01T23:00",
      "2023-10-02T00:00",
      "2023-10-02T01:00",
      "2023-10-02T02:00",
      "2023-10-02T03:00",
      "2023-10-02T04:00",
      "2023-10-02T05:00",
      "2023-10-02T06:00",
      "2023-10-02T07:00",
      "2023-10-02T08:00",
      "2023-10-02T09:00",
      "2023-10-02T10:00",
      "2023-10-02T11:00",
      "2023-10-02T12:00",
      "2023-10-02T13:00",
      "2023-10-02T14:00",
      "2023-10-02T15:00",
      "2023-10-02T16:00",
      "2023-10-02T17:00",
      "2023-10-02T18:00",
      "2023-10-02T19:00",
      "2023-10-02T20:00",
      "2023-10-02T21:00",
      "2023-10-02T22:00",
      "2023-10-02T23:00",
      "2023-10-03T00:00",
      "2023-10-03T01:00",
      "2023-10-03T02:00",
      "2023-10-03T03:00",
      "2023-10-03T04:00",
      "2023-10-03T05:00",
      "2023-10-03T06:00",
      "2023-10-03T07:00",
      "2023-10-03T08:00",
      "2023-10-03T09:00",
      "2023-10-03T10:00",
      "2023-10-03T11:00",
      "2023-10-03T12:00",
      "2023-10-03T13:00",
      "2023-10-03T14:00",
      "2023-10-03T15:00",
      "2023-10-03T16:00",
      "2023-10-03T17:00",
      "2023-10-03T18:00",
      "2023-10-03T19:00",
      "2023-10-03T20:00",
      "2023-10-03T21:00",
      "2023-10-03T22:00",
      "2023-10-03T23:00",
      "2023-10-04T00:00",
      "2023-10-04T01:00",
      "2023-10-04T02:00",
      "2023-10-04T03:00",
      "2023-10-04T04:00",
      "2023-10-04T05:00",
      "2023-10-04T06:00",
      "2023-10-04T07:00",
      "2023-10-04T08:00",
      "2023-10-04T09:00",
      "2023-10-04T10:00",
      "2023-10-04T11:00",
      "2023-10-04T12:00",
      "2023-10-04T13:00",
      "2023-10-04T14:00",
      "2023-10-04T15:00",
      "2023-10-04T16:00",
      "2023-10-04T17:00",
      "2023-10-04T18:00",
      "2023-10-04T19:00",
      "2023-10-04T20:00",
      "2023-10-04T21:00",
      "2023-10-04T22:00",
      "2023-10-04T23:00",
      "2023-10-05T00:00",
      "2023-10-05T01:00",
      "2023-10-05T02:00",
      "2023-10-05T03:00",
      "2023-10-05T04:00",
      "2023-10-05T05:00",
      "2023-10-05T06:00",
      "2023-10-05T07:00",
      "2023-10-05T08:00",
      "2023-10-05T09:00",
      "2023-10-05T10:00",
      "2023-10-05T11:00",
      "2023-10-05T12:00",
      "2023-10-05T13:00",
      "2023-10-05T14:00",
      "2023-10-05T15:00",
      "2023-10-05T16:00",
      "2023-10-05T17:00",
      "2023-10-05T18:00",
      "2023-10-05T19:00",
      "2023-10-05T20:00",
      "2023-10-05T21:00",
      "2023-10-05T22:00",
      "2023-10-05T23:00",
      "2023-10-06T00:00",
      "2023-10-06T01:00",
      "2023-10-06T02:00",
      "2023-10-06T03:00",
      "2023-10-06T04:00",
      "2023-10-06T05:00",
      "2023-10-06T06:00",
      "2023-10-06T07:00",
      "2023-10-06T08:00",
      "2023-10-06T09:00",
      "2023-10-06T10:00",
      "2023-10-06T11:00",
      "2023-10-06T12:00",
      "2023-10-06T13:00",
      "2023-10-06T14:00",
      "2023-10-06T15:00",
      "2023-10-06T16:00",
      "2023-10-06T17:00",
      "2023-10-06T18:00",
      "2023-10-06T19:00",
      "2023-10-06T20:00",
      "2023-10-06T21:00",
      "2023-10-06T22:00",
      "2023-10-06T23:00",
      "2023-10-07T00:00",
      "2023-10-07T01:00",
      "2023-10-07T02:00",
      "2023-10-07T03:00",
      "2023-10-07T04:00",
      "2023-10-07T05:00",
      "2023-10-07T06:00",
      "2023-10-07T07:00",
      "2023-10-07T08:00",
      "2023-10-07T09:00",
      "2023-10-07T10:00",
      "2023-10-07T11:00",
      "2023-10-07T12:00",
      "2023-10-07T13:00",
      "2023-10-07T14:00",
      "2023-10-07T15:00",
      "2023-10-07T16:00",
      "2023-10-07T17:00",
      "2023-10-07T18:00",
      "2023-10-07T19:00",
      "2023-10-07T20:00",
      "2023-10-07T21:00",
      "2023-10-07T22:00",
      "2023-10-07T23:00",
      "2023-10-08T00:00",
      "2023-10-08T01:00",
      "2023-10-08T02:00",
      "2023-10-08T03:00",
      "2023-10-08T04:00",
      "2023-10-08T05:00",
      "2023-10-08T06:00",
      "2023-10-08T07:00",
      "2023-10-08T08:00",
      "2023-10-08T09:00",
      "2023-10-08T10:00",
      "2023-10-08T11:00",
      "2023-10-08T12:00",
      "2023-10-08T13:00",
      "2023-10-08T14:00",
      "2023-10-08T15:00",
      "2023-10-08T16:00",
      "2023-10-08T17:00",
      "2023-10-08T18:00",
      "2023-10-08T19:00",
      "2023-10-08T20:00",
      "2023-10-08T21:00",
      "2023-10-08T22:00",
      "2023-10-08T23:00",
      "2023-10-09T00:00",
      "2023-10-09T01:00",
      "2023-10-09T02:00",
      "2023-10-09T03:00",
      "2023-10-09T04:00",
      "2023-10-09T05:00",
      "2023-10-09T06:00",
      "2023-10-09T07:00",
      "2023-10-09T08:00",
      "2023-10-09T09:00",
      "2023-10-09T10:00",
      "2023-10-09T11:00",
      "2023-10-09T12:00",
      "2023-10-09T13:00",
      "2023-10-09T14:00",
      "2023-10-09T15:00",
      "2023-10-09T16:00",
      "2023-10-09T17:00",
      "2023-10-09T18:00",
      "2023-10-09T19:00",
      "2023-10-09T20:00",
      "2023-10-09T21:00",
      "2023-10-09T22:00",
      "2023-10-09T23:00",
      "2023-10-10T00:00",
      "2023-10-10T01:00",
      "2023-10-10T02:00",
      "2023-10-10T03:00",
      "2023-10-10T04:00",
      "2023-10-10T05:00",
      "2023-10-10T06:00",
      "2023-10-10T07:00",
      "2023-10-10T08:00",
      "2023-10-10T09:00",
      "2023-10-10T10:00",
      "2023-10-10T11:00",
      "2023-10-10T12:00",
      "2023-10-10T13:00",
      "2023-10-10T14:00",
      "2023-10-10T15:00",
      "2023-10-10T16:00",
      "2023-10-10T17:00",
      "2023-10-10T18:00",
      "2023-10-10T19:00",
      "2023-10-10T20:00",
      "2023-10-10T21:00",
      "2023-10-10T22:00",
      "2023-10-10T23:00"
    ],
    datasets: [
      {
        data: [
          88,
          89,
          87,
          87,
          88,
          89,
          89,
          90,
          90,
          88,
          81,
          74,
          65,
          62,
          67,
          68,
          68,
          73,
          75,
          77,
          84,
          85,
          85,
          86,
          85,
          84,
          88,
          89,
          89,
          88,
          87,
          87,
          87,
          81,
          76,
          69,
          72,
          74,
          69,
          71,
          73,
          72,
          73,
          76,
          82,
          84,
          85,
          87,
          88,
          89,
          89,
          89,
          89,
          90,
          90,
          89,
          87,
          83,
          79,
          75,
          72,
          72,
          78,
          76,
          77,
          77,
          79,
          80,
          82,
          84,
          86,
          87,
          88,
          88,
          89,
          90,
          91,
          89,
          87,
          87,
          90,
          82,
          75,
          70,
          67,
          63,
          62,
          62,
          63,
          66,
          71,
          76,
          84,
          86,
          88,
          89,
          89,
          90,
          89,
          90,
          91,
          92,
          92,
          91,
          86,
          81,
          77,
          71,
          67,
          64,
          59,
          60,
          60,
          62,
          64,
          70,
          80,
          84,
          87,
          88,
          88,
          89,
          90,
          91,
          92,
          92,
          92,
          92,
          89,
          83,
          77,
          68,
          65,
          64,
          64,
          65,
          67,
          68,
          72,
          75,
          78,
          82,
          85,
          86,
          87,
          88,
          90,
          90,
          91,
          92,
          92,
          93,
          88,
          83,
          76,
          70,
          64,
          62,
          57,
          56,
          57,
          60,
          64,
          70,
          80,
          84,
          87,
          88,
          86,
          86,
          88,
          88,
          89,
          90,
          91,
          91,
          89,
          82,
          76,
          67,
          60,
          55,
          56,
          54,
          56,
          59,
          64,
          70,
          72,
          77,
          80,
          82,
          84,
          85,
          86,
          87,
          87,
          88,
          88,
          89,
          85,
          80,
          74,
          69,
          65,
          63,
          60,
          60,
          64,
          69,
          71,
          73,
          76,
          79,
          81,
          82,
          83,
          84,
          86,
          86,
          86,
          86,
          86,
          86,
          85,
          80,
          73,
          67,
          62,
          60,
          57,
          57,
          64,
          71,
          73,
          74,
          77,
          79,
          80,
          81
        ],
        label: '',
        backgroundColor: 'rgba(0,122,204,0.3)',
        hoverBackgroundColor: 'rgba(255,120,88,0.3)'
      }
    ]
  }
}
